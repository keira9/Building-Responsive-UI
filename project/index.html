<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Finance Tracker</title>
  </head>
  <body>
    <a href="#main" class="skip-link">Skip to main content</a>

    <header>
      <div class="container">
        <h1>Student Finance Tracker</h1>
        <p class="tagline">Manage your budget with confidence</p>
      </div>
    </header>

    <nav aria-label="Main navigation">
      <div class="container">
        <a href="#dashboard" class="active">Dashboard</a>
        <a href="#transactions">Transactions</a>
        <a href="#add">Add Transaction</a>
        <a href="#settings">Settings</a>
        <a href="#about">About</a>
      </div>
    </nav>

    <main id="main" class="container">
      <section id="dashboard" class="active" aria-labelledby="dashboard-heading">
        <h2 id="dashboard-heading">Dashboard</h2>

        <div class="stats-grid">
          <div class="stat-card">
            <h3>Total Transactions</h3>
            <p id="total-transactions" class="stat-value">0</p>
          </div>

          <div class="stat-card">
            <h3>Total Spending</h3>
            <p id="total-amount" class="stat-value">$0.00</p>
          </div>

          <div class="stat-card">
            <h3>Top Category</h3>
            <p id="top-category" class="stat-value">None</p>
          </div>

          <div class="stat-card">
            <h3>Last 7 Days</h3>
            <p id="recent-spending" class="stat-value">$0.00</p>
          </div>
        </div>

        <div class="budget-status">
          <h3>Monthly Budget</h3>
          <p id="cap-status" class="cap-status" role="status" aria-live="polite">Set your budget in settings</p>
        </div>

        <div class="chart-container">
          <h3>Spending by Category</h3>
          <div id="category-chart" class="category-chart"></div>
        </div>
      </section>

      <section id="transactions" aria-hidden="true" aria-labelledby="transactions-heading">
        <h2 id="transactions-heading">Transactions</h2>

        <div class="search-container">
          <div class="search-controls">
            <label for="search-input">Search with regex:</label>
            <input
              type="text"
              id="search-input"
              placeholder="e.g., coffee|tea or \.\d{2}\b"
              aria-describedby="search-help"
            />
            <button type="button" id="case-toggle" class="btn-small">Case: aa</button>
          </div>
          <p id="search-help" class="help-text">
            Try: <code>/coffee|tea/</code> for beverages, <code>/\.\d{2}\b/</code> for cents, or <code>/\b(\w+)\s+\1\b/</code> for duplicates
          </p>
        </div>

        <div class="table-container">
          <table class="transactions-table">
            <thead>
              <tr>
                <th data-sort="date">Date<span class="sort-indicator"> ↓</span></th>
                <th data-sort="description">Description<span class="sort-indicator"></span></th>
                <th data-sort="category">Category<span class="sort-indicator"></span></th>
                <th data-sort="amount">Amount<span class="sort-indicator"></span></th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="transactions-tbody">
              <tr>
                <td colspan="5" class="empty-state">No transactions yet. Add your first transaction!</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="action-buttons">
          <button type="button" id="export-btn" class="btn-secondary">Export JSON</button>
          <button type="button" id="import-btn" class="btn-secondary">Import JSON</button>
          <input type="file" id="import-file" accept=".json" style="display: none;" />
        </div>
      </section>

      <section id="add" aria-hidden="true" aria-labelledby="add-heading">
        <h2 id="add-heading">Add Transaction</h2>

        <form id="transaction-form" class="transaction-form" novalidate>
          <div class="form-group">
            <label for="description">Description *</label>
            <input
              type="text"
              id="description"
              name="description"
              required
              aria-required="true"
              placeholder="e.g., Lunch at cafeteria"
            />
          </div>

          <div class="form-group">
            <label for="amount">Amount ($) *</label>
            <input
              type="text"
              id="amount"
              name="amount"
              required
              aria-required="true"
              placeholder="e.g., 12.50"
            />
          </div>

          <div class="form-group">
            <label for="category">Category *</label>
            <select id="category" name="category" required aria-required="true">
              <option value="Food">Food</option>
              <option value="Books">Books</option>
              <option value="Transport">Transport</option>
              <option value="Entertainment">Entertainment</option>
              <option value="Fees">Fees</option>
              <option value="Other">Other</option>
            </select>
          </div>

          <div class="form-group">
            <label for="date">Date *</label>
            <input
              type="date"
              id="date"
              name="date"
              required
              aria-required="true"
            />
          </div>

          <button type="submit" class="btn-primary">Save Transaction</button>
        </form>
      </section>

      <section id="settings" aria-hidden="true" aria-labelledby="settings-heading">
        <h2 id="settings-heading">Settings</h2>

        <form id="settings-form" class="settings-form">
          <h3>Budget Settings</h3>

          <div class="form-group">
            <label for="monthly-cap">Monthly Budget Cap ($)</label>
            <input
              type="number"
              id="monthly-cap"
              name="monthly-cap"
              min="0"
              step="0.01"
              value="500"
            />
          </div>

          <h3>Currency Conversion</h3>

          <div class="form-group">
            <label for="base-currency">Base Currency</label>
            <select id="base-currency" name="base-currency">
              <option value="USD">USD ($)</option>
              <option value="EUR">EUR (€)</option>
              <option value="GBP">GBP (£)</option>
            </select>
          </div>

          <div class="form-group">
            <label for="eur-rate">EUR Exchange Rate</label>
            <input
              type="number"
              id="eur-rate"
              name="eur-rate"
              min="0"
              step="0.01"
              value="0.85"
            />
          </div>

          <div class="form-group">
            <label for="gbp-rate">GBP Exchange Rate</label>
            <input
              type="number"
              id="gbp-rate"
              name="gbp-rate"
              min="0"
              step="0.01"
              value="0.73"
            />
          </div>

          <button type="submit" class="btn-primary">Save Settings</button>
        </form>
      </section>

      <section id="about" aria-hidden="true" aria-labelledby="about-heading">
        <h2 id="about-heading">About</h2>

        <div class="about-content">
          <h3>Purpose</h3>
          <p>
            The Student Finance Tracker helps you manage your budget with powerful features including:
          </p>
          <ul>
            <li>Track income and expenses by category</li>
            <li>Set monthly spending caps with real-time alerts</li>
            <li>Advanced regex search to find specific transactions</li>
            <li>Visual spending breakdowns by category</li>
            <li>Import/export your data as JSON</li>
            <li>Multi-currency support with custom exchange rates</li>
          </ul>

          <h3>Features</h3>
          <ul>
            <li><strong>Regex Validation:</strong> All inputs validated with advanced patterns</li>
            <li><strong>Responsive Design:</strong> Works on mobile, tablet, and desktop</li>
            <li><strong>Accessible:</strong> Full keyboard navigation and screen reader support</li>
            <li><strong>Data Persistence:</strong> Automatic saving to localStorage</li>
            <li><strong>Privacy First:</strong> All data stays on your device</li>
          </ul>

          <h3>Contact</h3>
          <p>
            <strong>Developer:</strong> Student Finance Team<br>
            <strong>GitHub:</strong> <a href="https://github.com" target="_blank" rel="noopener">github.com/finance-tracker</a><br>
            <strong>Email:</strong> <a href="mailto:contact@financetracker.dev">contact@financetracker.dev</a>
          </p>

          <h3>Regex Search Examples</h3>
          <ul>
            <li><code>/coffee|tea/i</code> - Find beverage purchases</li>
            <li><code>/\.\d{2}\b/</code> - Find amounts with cents</li>
            <li><code>/\b(\w+)\s+\1\b/</code> - Find duplicate words</li>
            <li><code>/^[1-9]\d{2,}/</code> - Find amounts over $100</li>
          </ul>
        </div>
      </section>
    </main>

    <footer>
      <div class="container">
        <p>&copy; 2025 Student Finance Tracker</p>
      </div>
    </footer>

    <div id="status-message" role="status" aria-live="polite" class="visually-hidden"></div>

    <script type="module" src="/main.js"></script>
  </body>
</html>
